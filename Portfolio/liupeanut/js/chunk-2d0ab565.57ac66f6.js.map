{"version":3,"sources":["webpack:///./src/views/Orders.vue","webpack:///./src/components/OrdersModal.vue","webpack:///./src/components/OrdersModal.vue?c339","webpack:///./src/views/Orders.vue?5534"],"names":["class","_createElementVNode","_createVNode","_component_loading","active","$data","_hoisted_1","_hoisted_2","_createElementBlock","_Fragment","item","key","id","_ctx","date","create_at","user","email","_hoisted_3","products","prd","product","title","qty","_hoisted_4","total","is_paid","_hoisted_5","_hoisted_6","_hoisted_7","onClick","$options","_component_OrdersModal","ref","order","onUpdateOrder","_component_DelModalVue","onDelItem","_component_Pagination","pages","onChangPage","tabindex","role","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","style","for","_hoisted_8","_hoisted_9","_hoisted_11","name","_hoisted_12","_hoisted_13","tel","_hoisted_14","address","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","currency","_hoisted_25","_hoisted_26","_hoisted_27","unit","_hoisted_28","final_total","_hoisted_29","_hoisted_30","props","Object","default","data","status","modal","tempOrder","isPaid","emits","mixins","modalMixin","inject","watch","this","__exports__","components","Pagination","OrdersModal","DelModalVue","orders","pagination","isLoading","methods","getOrders","page","api","$http","get","then","res","success","changPage","getCoupons","openDelModal","$refs","DelModal","showModal","deleteData","delete","$httpMessage","hideModal","openModal","updateOrder","paid","put","created","render"],"mappings":"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","file":"js/chunk-2d0ab565.57ac66f6.js","sourcesContent":["<template>\r\n  <loading :active=\"isLoading\"></loading>\r\n  <div>\r\n    <table class=\"table mt-4\">\r\n    <thead>\r\n    <tr>\r\n      <th>訂單編號</th>\r\n      <th>訂單日期</th>\r\n      <th>Email</th>\r\n      <th>購買款項</th>\r\n      <th>應付金額</th>\r\n      <th>是否付款</th>\r\n      <th>編輯</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"item in orders\" :key=\"item.id\">\r\n        <td>{{item.id}}</td>\r\n        <td>{{ $filters.date(item.create_at) }}</td>\r\n        <td>{{item.user.email}}</td>\r\n        <td class=\"text-right\">\r\n          <span v-for=\"prd in item.products\" :key=\"prd\" class=\"ms-2\">\r\n            {{prd.product.title}}*{{ prd.qty }}\r\n          </span>\r\n        </td>\r\n        <td class=\"text-right\">\r\n          {{item.total}}\r\n        </td>\r\n        <td>\r\n          <span class=\"text-success\" v-if=\"item.is_paid\">已付款</span>\r\n          <span class=\"text-muted\" v-else>尚未付款</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <button class=\"btn btn-outline-primary btn-sm\" @click.prevent=\"openModal(item)\">檢視</button>\r\n            <button class=\"btn btn-outline-danger btn-sm\" @click.prevent=\"openDelModal(item)\">刪除</button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  </div>\r\n  <OrdersModal ref=\"OrdersModal\" :order=\"tempOrder\" @update-order=\"updateOrder\"></OrdersModal>\r\n  <DelModalVue ref=\"DelModal\" :item=\"tempOrder\" @del-item=\"deleteData\"></DelModalVue>\r\n  <Pagination :pages=\"pagination\" @chang-page=\"changPage\"></Pagination>\r\n</template>\r\n<script>\r\nimport Pagination from '../components/Pagination.vue'\r\nimport OrdersModal from '../components/OrdersModal.vue'\r\nimport DelModalVue from '../components/DelModal.vue'\r\nexport default {\r\n  components: {\r\n    Pagination,\r\n    OrdersModal,\r\n    DelModalVue\r\n  },\r\n  data () {\r\n    return {\r\n      orders: [],\r\n      pagination: {},\r\n      isLoading: false,\r\n      tempOrder: {}\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getOrders (page = 1) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`\r\n      this.$http.get(api).then((res) => {\r\n        this.isLoading = false\r\n        if (res.data.success) {\r\n          this.orders = res.data.orders\r\n          this.pagination = res.data.pagination\r\n        }\r\n      })\r\n    },\r\n    changPage (page) {\r\n      this.getCoupons(page)\r\n    },\r\n    openDelModal (item) {\r\n      this.tempOrder = { ...item }\r\n      this.tempOrder.title = this.tempOrder.id\r\n      this.$refs.DelModal.showModal()\r\n    },\r\n    deleteData () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`\r\n      this.$http.delete(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.getOrders()\r\n          this.$httpMessage(res, '刪除')\r\n        } else {\r\n          this.$httpMessage(res, '刪除')\r\n        }\r\n        this.$refs.DelModal.hideModal()\r\n      })\r\n    },\r\n    openModal (item) {\r\n      this.$refs.OrdersModal.showModal()\r\n      this.tempOrder = { ...item }\r\n    },\r\n    updateOrder (item) {\r\n      this.tempOrder = item\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${item.id}`\r\n      const paid = {\r\n        is_paid: item.is_paid\r\n      }\r\n      this.$http.put(api, { data: paid }).then((res) => {\r\n        this.tempOrder = {}\r\n        this.$refs.OrdersModal.hideModal()\r\n        if (res.data.success) {\r\n          this.getOrders()\r\n          this.$httpMessage(res, '修改')\r\n        } else {\r\n          this.$httpMessage(res, '修改')\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrders()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"productModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    ref=\"modal\"\r\n  >\r\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n      <div class=\"modal-content border-0\">\r\n        <div class=\"modal-header bg-dark text-white\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\r\n            <span>訂單細節</span>\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4\">\r\n              <h3>用戶資料</h3>\r\n              <table class=\"table\">\r\n                <tbody v-if=\"tempOrder.user\">\r\n                  <tr>\r\n                    <th style=\"width: 100px\">姓名</th>\r\n                    <td>{{ tempOrder.user.name }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>Email</th>\r\n                    <td>{{ tempOrder.user.email }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>電話</th>\r\n                    <td>{{ tempOrder.user.tel }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>地址</th>\r\n                    <td>{{ tempOrder.user.address }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"col-md-8\">\r\n              <h3>訂單細節</h3>\r\n              <table class=\"table\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th style=\"width: 100px\">訂單編號</th>\r\n                    <td>{{ tempOrder.id }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>下單時間</th>\r\n                    <td>{{ $filters.date(tempOrder.create_at) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <input type=\"checkbox\" class=\"form-check-input me-2\" id=\"paid\" v-model=\"tempOrder.is_paid\">\r\n                      <label class=\"form-check-label\" for=\"paid\">\r\n                        <strong v-if=\"tempOrder.is_paid\" class=\"text-success\">已付款</strong>\r\n                        <span v-else class=\"text-muted\">尚未付款</span>\r\n                      </label>\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>總金額</th>\r\n                    <td>\r\n                      {{ $filters.currency(tempOrder.total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <h3>選購商品</h3>\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr></tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"item in tempOrder.products\" :key=\"item.id\">\r\n                    <th>\r\n                      {{ item.product.title }}\r\n                    </th>\r\n                    <td>{{ item.qty }} / {{ item.product.unit }}</td>\r\n                    <td class=\"text-end\">\r\n                      {{ $filters.currency(item.final_total) }}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-secondary\"\r\n            data-bs-dismiss=\"modal\"\r\n          >\r\n            取消\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"$emit('update-order', tempOrder)\"\r\n          >\r\n            確認\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport modalMixin from '../mixins/modalMixin'\r\nexport default {\r\n  name: 'orderModal',\r\n  props: {\r\n    order: {\r\n      type: Object,\r\n      default () {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      status: {},\r\n      modal: '',\r\n      tempOrder: {},\r\n      isPaid: false\r\n    }\r\n  },\r\n  emits: ['update-order'],\r\n  mixins: [\r\n    modalMixin\r\n  ],\r\n  inject: ['emitter'],\r\n  watch: {\r\n    order () {\r\n      this.tempOrder = this.order\r\n      this.isPaid = this.tempOrder.is_paid\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./OrdersModal.vue?vue&type=template&id=08f233a7\"\nimport script from \"./OrdersModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrdersModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\acerk\\\\Desktop\\\\Vue3_Project\\\\shopping\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Orders.vue?vue&type=template&id=ceb82372\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\acerk\\\\Desktop\\\\Vue3_Project\\\\shopping\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}